{"version":4,"terraform_version":"1.8.7","serial":57,"lineage":"bae0b91a-4db2-c899-ae7d-4459b82a9081","outputs":{},"resources":[{"module":"module.helm_releases","mode":"data","type":"http","name":"kube_stack_config","provider":"provider[\"registry.opentofu.org/hashicorp/http\"]","instances":[{"schema_version":0,"attributes":{"body":"# Default values for cnp-sandbox.\n# This is a YAML-formatted file.\n# Declare variables to be passed into your templates.\n#\n#\n# Copyright The CloudNativePG Contributors\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#     http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\n# -- here you can pass the whole values directly to the kube-prometheus-stack chart\nenabled: true\nkubeControllerManager:\n  enabled: false\nnodeExporter:\n  enabled: false\ndefaultRules:\n  create: true\n  rules:\n    alertmanager: false\n    etcd: false\n    configReloaders: false\n    general: false\n    k8s: true\n    kubeApiserver: false\n    kubeApiserverAvailability: false\n    kubeApiserverSlos: false\n    kubelet: true\n    kubeProxy: false\n    kubePrometheusGeneral: false\n    kubePrometheusNodeRecording: false\n    kubernetesApps: false\n    kubernetesResources: false\n    kubernetesStorage: false\n    kubernetesSystem: false\n    kubeScheduler: false\n    kubeStateMetrics: false\n    network: false\n    node: true\n    nodeExporterAlerting: false\n    nodeExporterRecording: true\n    prometheus: false\n    prometheusOperator: false\n\n#nodeSelector:\n  #workload: monitor\nprometheus:\n  prometheusSpec:\n    podMonitorSelectorNilUsesHelmValues: false\n    ruleSelectorNilUsesHelmValues: false\n    serviceMonitorSelectorNilUsesHelmValues: false\n    probeSelectorNilUsesHelmValues: false\n  #nodeSelector:\n    #workload: monitor\ngrafana:\n  enabled: true\n  # -- the grafana admin password\n  adminPassword: prom-operator\n  defaultDashboardsEnabled: false\n  sidecar:\n      dashboards:\n        enabled: true\n  #nodeSelector:\n    #workload: monitor\nalertmanager:\n  enabled: true\n  #alertManagerSpec:\n    #nodeSelector:\n      #workload: monitor\n","ca_cert_pem":null,"id":"https://raw.githubusercontent.com/cloudnative-pg/cloudnative-pg/main/docs/src/samples/monitoring/kube-stack-config.yaml","insecure":null,"method":null,"request_body":null,"request_headers":null,"request_timeout_ms":null,"response_body":"# Default values for cnp-sandbox.\n# This is a YAML-formatted file.\n# Declare variables to be passed into your templates.\n#\n#\n# Copyright The CloudNativePG Contributors\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#     http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\n# -- here you can pass the whole values directly to the kube-prometheus-stack chart\nenabled: true\nkubeControllerManager:\n  enabled: false\nnodeExporter:\n  enabled: false\ndefaultRules:\n  create: true\n  rules:\n    alertmanager: false\n    etcd: false\n    configReloaders: false\n    general: false\n    k8s: true\n    kubeApiserver: false\n    kubeApiserverAvailability: false\n    kubeApiserverSlos: false\n    kubelet: true\n    kubeProxy: false\n    kubePrometheusGeneral: false\n    kubePrometheusNodeRecording: false\n    kubernetesApps: false\n    kubernetesResources: false\n    kubernetesStorage: false\n    kubernetesSystem: false\n    kubeScheduler: false\n    kubeStateMetrics: false\n    network: false\n    node: true\n    nodeExporterAlerting: false\n    nodeExporterRecording: true\n    prometheus: false\n    prometheusOperator: false\n\n#nodeSelector:\n  #workload: monitor\nprometheus:\n  prometheusSpec:\n    podMonitorSelectorNilUsesHelmValues: false\n    ruleSelectorNilUsesHelmValues: false\n    serviceMonitorSelectorNilUsesHelmValues: false\n    probeSelectorNilUsesHelmValues: false\n  #nodeSelector:\n    #workload: monitor\ngrafana:\n  enabled: true\n  # -- the grafana admin password\n  adminPassword: prom-operator\n  defaultDashboardsEnabled: false\n  sidecar:\n      dashboards:\n        enabled: true\n  #nodeSelector:\n    #workload: monitor\nalertmanager:\n  enabled: true\n  #alertManagerSpec:\n    #nodeSelector:\n      #workload: monitor\n","response_body_base64":"IyBEZWZhdWx0IHZhbHVlcyBmb3IgY25wLXNhbmRib3guCiMgVGhpcyBpcyBhIFlBTUwtZm9ybWF0dGVkIGZpbGUuCiMgRGVjbGFyZSB2YXJpYWJsZXMgdG8gYmUgcGFzc2VkIGludG8geW91ciB0ZW1wbGF0ZXMuCiMKIwojIENvcHlyaWdodCBUaGUgQ2xvdWROYXRpdmVQRyBDb250cmlidXRvcnMKIwojIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwojIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KIyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKIwojICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKIwojIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKIyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAojIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgojIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKIyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KIwoKIyAtLSBoZXJlIHlvdSBjYW4gcGFzcyB0aGUgd2hvbGUgdmFsdWVzIGRpcmVjdGx5IHRvIHRoZSBrdWJlLXByb21ldGhldXMtc3RhY2sgY2hhcnQKZW5hYmxlZDogdHJ1ZQprdWJlQ29udHJvbGxlck1hbmFnZXI6CiAgZW5hYmxlZDogZmFsc2UKbm9kZUV4cG9ydGVyOgogIGVuYWJsZWQ6IGZhbHNlCmRlZmF1bHRSdWxlczoKICBjcmVhdGU6IHRydWUKICBydWxlczoKICAgIGFsZXJ0bWFuYWdlcjogZmFsc2UKICAgIGV0Y2Q6IGZhbHNlCiAgICBjb25maWdSZWxvYWRlcnM6IGZhbHNlCiAgICBnZW5lcmFsOiBmYWxzZQogICAgazhzOiB0cnVlCiAgICBrdWJlQXBpc2VydmVyOiBmYWxzZQogICAga3ViZUFwaXNlcnZlckF2YWlsYWJpbGl0eTogZmFsc2UKICAgIGt1YmVBcGlzZXJ2ZXJTbG9zOiBmYWxzZQogICAga3ViZWxldDogdHJ1ZQogICAga3ViZVByb3h5OiBmYWxzZQogICAga3ViZVByb21ldGhldXNHZW5lcmFsOiBmYWxzZQogICAga3ViZVByb21ldGhldXNOb2RlUmVjb3JkaW5nOiBmYWxzZQogICAga3ViZXJuZXRlc0FwcHM6IGZhbHNlCiAgICBrdWJlcm5ldGVzUmVzb3VyY2VzOiBmYWxzZQogICAga3ViZXJuZXRlc1N0b3JhZ2U6IGZhbHNlCiAgICBrdWJlcm5ldGVzU3lzdGVtOiBmYWxzZQogICAga3ViZVNjaGVkdWxlcjogZmFsc2UKICAgIGt1YmVTdGF0ZU1ldHJpY3M6IGZhbHNlCiAgICBuZXR3b3JrOiBmYWxzZQogICAgbm9kZTogdHJ1ZQogICAgbm9kZUV4cG9ydGVyQWxlcnRpbmc6IGZhbHNlCiAgICBub2RlRXhwb3J0ZXJSZWNvcmRpbmc6IHRydWUKICAgIHByb21ldGhldXM6IGZhbHNlCiAgICBwcm9tZXRoZXVzT3BlcmF0b3I6IGZhbHNlCgojbm9kZVNlbGVjdG9yOgogICN3b3JrbG9hZDogbW9uaXRvcgpwcm9tZXRoZXVzOgogIHByb21ldGhldXNTcGVjOgogICAgcG9kTW9uaXRvclNlbGVjdG9yTmlsVXNlc0hlbG1WYWx1ZXM6IGZhbHNlCiAgICBydWxlU2VsZWN0b3JOaWxVc2VzSGVsbVZhbHVlczogZmFsc2UKICAgIHNlcnZpY2VNb25pdG9yU2VsZWN0b3JOaWxVc2VzSGVsbVZhbHVlczogZmFsc2UKICAgIHByb2JlU2VsZWN0b3JOaWxVc2VzSGVsbVZhbHVlczogZmFsc2UKICAjbm9kZVNlbGVjdG9yOgogICAgI3dvcmtsb2FkOiBtb25pdG9yCmdyYWZhbmE6CiAgZW5hYmxlZDogdHJ1ZQogICMgLS0gdGhlIGdyYWZhbmEgYWRtaW4gcGFzc3dvcmQKICBhZG1pblBhc3N3b3JkOiBwcm9tLW9wZXJhdG9yCiAgZGVmYXVsdERhc2hib2FyZHNFbmFibGVkOiBmYWxzZQogIHNpZGVjYXI6CiAgICAgIGRhc2hib2FyZHM6CiAgICAgICAgZW5hYmxlZDogdHJ1ZQogICNub2RlU2VsZWN0b3I6CiAgICAjd29ya2xvYWQ6IG1vbml0b3IKYWxlcnRtYW5hZ2VyOgogIGVuYWJsZWQ6IHRydWUKICAjYWxlcnRNYW5hZ2VyU3BlYzoKICAgICNub2RlU2VsZWN0b3I6CiAgICAgICN3b3JrbG9hZDogbW9uaXRvcgo=","response_headers":{"Accept-Ranges":"bytes","Access-Control-Allow-Origin":"*","Cache-Control":"max-age=300","Content-Security-Policy":"default-src 'none'; style-src 'unsafe-inline'; sandbox","Content-Type":"text/plain; charset=utf-8","Cross-Origin-Resource-Policy":"cross-origin","Date":"Mon, 30 Dec 2024 19:14:37 GMT","Etag":"W/\"da7fb14f712ebc1bd1ba289e725b5c079653c7c8d70eaf9af383762147f7e41b\"","Expires":"Mon, 30 Dec 2024 19:19:37 GMT","Source-Age":"182","Strict-Transport-Security":"max-age=31536000","Vary":"Authorization,Accept-Encoding,Origin","Via":"1.1 varnish","X-Cache":"HIT","X-Cache-Hits":"0","X-Content-Type-Options":"nosniff","X-Fastly-Request-Id":"a23a64c9076ac8c3f14ff702bced309ad14528a0","X-Frame-Options":"deny","X-Github-Request-Id":"A214:4E53C:4FC053C:53170BB:6772E86B","X-Served-By":"cache-cph2320029-CPH","X-Timer":"S1735586078.689925,VS0,VE1","X-Xss-Protection":"1; mode=block"},"retry":null,"status_code":200,"url":"https://raw.githubusercontent.com/cloudnative-pg/cloudnative-pg/main/docs/src/samples/monitoring/kube-stack-config.yaml"},"sensitive_attributes":[]}]},{"module":"module.helm_releases","mode":"managed","type":"helm_release","name":"cnpg","provider":"provider[\"registry.opentofu.org/hashicorp/helm\"]","instances":[{"schema_version":1,"attributes":{"atomic":false,"chart":"cloudnative-pg","cleanup_on_fail":false,"create_namespace":true,"dependency_update":false,"description":null,"devel":null,"disable_crd_hooks":false,"disable_openapi_validation":false,"disable_webhooks":false,"force_update":false,"id":"cnpg","keyring":null,"lint":false,"manifest":null,"max_history":0,"metadata":[{"app_version":"1.25.0","chart":"cloudnative-pg","first_deployed":1735583023,"last_deployed":1735583023,"name":"cnpg","namespace":"cnpg-system","notes":"\nCloudNativePG operator should be installed in namespace \"cnpg-system\".\nYou can now create a PostgreSQL cluster with 3 nodes as follows:\n\ncat \u003c\u003cEOF | kubectl apply -f -\n# Example of PostgreSQL cluster\napiVersion: postgresql.cnpg.io/v1\nkind: Cluster\nmetadata:\n  name: cluster-example\n  \nspec:\n  instances: 3\n  storage:\n    size: 1Gi\nEOF\n\nkubectl get -A cluster\n\n","revision":1,"values":"{}","version":"0.23.0"}],"name":"cnpg","namespace":"cnpg-system","pass_credentials":false,"postrender":[],"recreate_pods":false,"render_subchart_notes":true,"replace":false,"repository":"https://cloudnative-pg.github.io/charts","repository_ca_file":null,"repository_cert_file":null,"repository_key_file":null,"repository_password":null,"repository_username":null,"reset_values":false,"reuse_values":false,"set":[],"set_list":[],"set_sensitive":[],"skip_crds":false,"status":"deployed","timeout":300,"upgrade_install":null,"values":null,"verify":false,"version":"0.23.0","wait":true,"wait_for_jobs":false},"sensitive_attributes":[[{"type":"get_attr","value":"repository_password"}]],"private":"eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==","dependencies":["module.k8s_manifests.kubernetes_manifest.postgres_cluster","module.k8s_manifests.kubernetes_namespace.namespace","module.k8s_manifests.kubernetes_secret.postgres_credentials"]}]},{"module":"module.helm_releases","mode":"managed","type":"helm_release","name":"pihole","provider":"provider[\"registry.opentofu.org/hashicorp/helm\"]","instances":[{"schema_version":1,"attributes":{"atomic":false,"chart":"pihole","cleanup_on_fail":false,"create_namespace":false,"dependency_update":false,"description":null,"devel":null,"disable_crd_hooks":false,"disable_openapi_validation":false,"disable_webhooks":false,"force_update":false,"id":"pihole","keyring":null,"lint":false,"manifest":null,"max_history":0,"metadata":[{"app_version":"2024.07.0","chart":"pihole","first_deployed":1735582797,"last_deployed":1735582797,"name":"pihole","namespace":"home","notes":"Pi-hole Helm Chart Deployment\n\n1. Pi-hole Deployment Information:\n   - Release Name: pihole\n   - Namespace: home\n   - Chart Name: pihole\n   - Chart Version: 2.27.0\n\n2. Pi-hole Service Information:\n   - Service Name: pihole-web\n   - Service Type: ClusterIP\n   - Service Port: 80/443 TCP\n\n   - Service Name: pihole-dns-tcp\n   - Service Type: NodePort\n   - Service Port: 53 TCP\n\n   - Service Name: pihole-dns-udp\n   - Service Type: NodePort\n   - Service Port: 53 UDP\n\n   - Service Name: pihole-dhcp\n   - Service Type: NodePort\n   - Service Port: 67 UDP\n\n3. Accessing Pi-hole:\n   !!! This chart does not create a Loadbalancer for pihole by default. Please\n   create a configuration that is tailored to your setup. Especially the DNS\n   and DHCP services are system services that require a dedicated setup based\n   on your system !!!\n\n   Find more information in the wiki:\n   https://github.com/MoJo2600/pihole-kubernetes/wiki/Pi%E2%80%90hole\n\n4. Useful Commands:\n   - Check the Pi-hole Deployment Status:\n     helm status pihole\n\n   - Get Detailed Information about the Pi-hole Deployment:\n     helm get all pihole\n\n5. Clean Up:\n   - To uninstall/delete the Pi-hole deployment, run:\n     helm uninstall pihole","revision":1,"values":"{\"dnsmasq\":{\"customDnsEntries\":[\"address=/pihole.home.io/10.0.0.101\",\"address=/postgres.home.io/10.0.0.102\"]},\"persistentVolumeClaim\":{\"enabled\":true},\"serviceDns\":{\"annotations\":{\"metallb.universe.tf/allow-shared-ip\":\"pihole-svc\"},\"loadBalancerIP\":\"10.0.0.101\",\"type\":\"LoadBalancer\"},\"serviceWeb\":{\"annotations\":{\"metallb.universe.tf/allow-shared-ip\":\"pihole-svc\"},\"loadBalancerIP\":\"10.0.0.101\",\"type\":\"LoadBalancer\"}}","version":"2.27.0"}],"name":"pihole","namespace":"home","pass_credentials":false,"postrender":[],"recreate_pods":false,"render_subchart_notes":true,"replace":false,"repository":"https://mojo2600.github.io/pihole-kubernetes/","repository_ca_file":null,"repository_cert_file":null,"repository_key_file":null,"repository_password":null,"repository_username":null,"reset_values":false,"reuse_values":false,"set":[],"set_list":[],"set_sensitive":[],"skip_crds":false,"status":"deployed","timeout":300,"upgrade_install":null,"values":["dnsmasq:\n  customDnsEntries:\n    - address=/pihole.home.io/10.0.0.101\n    - address=/postgres.home.io/10.0.0.102\n\n\npersistentVolumeClaim:\n  enabled: true\n\nserviceWeb:\n  loadBalancerIP: 10.0.0.101\n  annotations:\n    metallb.universe.tf/allow-shared-ip: pihole-svc\n  type: LoadBalancer\n\nserviceDns:\n  loadBalancerIP: 10.0.0.101\n  annotations:\n    metallb.universe.tf/allow-shared-ip: pihole-svc\n  type: LoadBalancer\n\n"],"verify":false,"version":"2.27.0","wait":true,"wait_for_jobs":false},"sensitive_attributes":[[{"type":"get_attr","value":"repository_password"}]],"private":"eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==","dependencies":["module.k8s_manifests.kubernetes_manifest.postgres_cluster","module.k8s_manifests.kubernetes_namespace.namespace","module.k8s_manifests.kubernetes_secret.postgres_credentials"]}]},{"module":"module.helm_releases","mode":"managed","type":"helm_release","name":"prometheus_alt","provider":"provider[\"registry.opentofu.org/hashicorp/helm\"]","instances":[{"schema_version":1,"attributes":{"atomic":false,"chart":"kube-prometheus-stack","cleanup_on_fail":false,"create_namespace":false,"dependency_update":false,"description":null,"devel":null,"disable_crd_hooks":false,"disable_openapi_validation":false,"disable_webhooks":false,"force_update":false,"id":"prometheus-community","keyring":null,"lint":false,"manifest":null,"max_history":0,"metadata":[{"app_version":"v0.79.2","chart":"kube-prometheus-stack","first_deployed":1735583895,"last_deployed":1735583895,"name":"prometheus-community","namespace":"default","notes":"kube-prometheus-stack has been installed. Check its status by running:\n  kubectl --namespace default get pods -l \"release=prometheus-community\"\n\nVisit https://github.com/prometheus-operator/kube-prometheus for instructions on how to create \u0026 configure Alertmanager and Prometheus instances using the Operator.\n\n1. Get your 'admin' user password by running:\n\n   kubectl get secret --namespace default prometheus-community-grafana -o jsonpath=\"{.data.admin-password}\" | base64 --decode ; echo\n\n\n2. The Grafana server can be accessed via port 80 on the following DNS name from within your cluster:\n\n   prometheus-community-grafana.default.svc.cluster.local\n\n   Get the Grafana URL to visit by running these commands in the same shell:\n     export POD_NAME=$(kubectl get pods --namespace default -l \"app.kubernetes.io/name=grafana,app.kubernetes.io/instance=prometheus-community\" -o jsonpath=\"{.items[0].metadata.name}\")\n     kubectl --namespace default port-forward $POD_NAME 3000\n\n3. Login with the password from step 1 and the username: admin\n#################################################################################\n######   WARNING: Persistence is disabled!!! You will lose your data when   #####\n######            the Grafana pod is terminated.                            #####\n#################################################################################\n\nkube-state-metrics is a simple service that listens to the Kubernetes API server and generates metrics about the state of the objects.\nThe exposed metrics can be found here:\nhttps://github.com/kubernetes/kube-state-metrics/blob/master/docs/README.md#exposed-metrics\n\nThe metrics are exported on the HTTP endpoint /metrics on the listening port.\nIn your case, prometheus-community-kube-state-metrics.default.svc.cluster.local:8080/metrics\n\nThey are served either as plaintext or protobuf depending on the Accept header.\nThey are designed to be consumed either by Prometheus itself or by a scraper that is compatible with scraping a Prometheus client endpoint.\n","revision":1,"values":"{\"alertmanager\":{\"enabled\":true},\"defaultRules\":{\"create\":true,\"rules\":{\"alertmanager\":false,\"configReloaders\":false,\"etcd\":false,\"general\":false,\"k8s\":true,\"kubeApiserver\":false,\"kubeApiserverAvailability\":false,\"kubeApiserverSlos\":false,\"kubePrometheusGeneral\":false,\"kubePrometheusNodeRecording\":false,\"kubeProxy\":false,\"kubeScheduler\":false,\"kubeStateMetrics\":false,\"kubelet\":true,\"kubernetesApps\":false,\"kubernetesResources\":false,\"kubernetesStorage\":false,\"kubernetesSystem\":false,\"network\":false,\"node\":true,\"nodeExporterAlerting\":false,\"nodeExporterRecording\":true,\"prometheus\":false,\"prometheusOperator\":false}},\"enabled\":true,\"grafana\":{\"adminPassword\":\"prom-operator\",\"defaultDashboardsEnabled\":false,\"enabled\":true,\"sidecar\":{\"dashboards\":{\"enabled\":true}}},\"kubeControllerManager\":{\"enabled\":false},\"nodeExporter\":{\"enabled\":false},\"prometheus\":{\"prometheusSpec\":{\"podMonitorSelectorNilUsesHelmValues\":false,\"probeSelectorNilUsesHelmValues\":false,\"ruleSelectorNilUsesHelmValues\":false,\"serviceMonitorSelectorNilUsesHelmValues\":false}}}","version":"67.5.0"}],"name":"prometheus-community","namespace":"default","pass_credentials":false,"postrender":[],"recreate_pods":false,"render_subchart_notes":true,"replace":false,"repository":"https://prometheus-community.github.io/helm-charts","repository_ca_file":null,"repository_cert_file":null,"repository_key_file":null,"repository_password":null,"repository_username":null,"reset_values":false,"reuse_values":false,"set":[],"set_list":[],"set_sensitive":[],"skip_crds":false,"status":"deployed","timeout":300,"upgrade_install":null,"values":["# Default values for cnp-sandbox.\n# This is a YAML-formatted file.\n# Declare variables to be passed into your templates.\n#\n#\n# Copyright The CloudNativePG Contributors\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#     http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\n# -- here you can pass the whole values directly to the kube-prometheus-stack chart\nenabled: true\nkubeControllerManager:\n  enabled: false\nnodeExporter:\n  enabled: false\ndefaultRules:\n  create: true\n  rules:\n    alertmanager: false\n    etcd: false\n    configReloaders: false\n    general: false\n    k8s: true\n    kubeApiserver: false\n    kubeApiserverAvailability: false\n    kubeApiserverSlos: false\n    kubelet: true\n    kubeProxy: false\n    kubePrometheusGeneral: false\n    kubePrometheusNodeRecording: false\n    kubernetesApps: false\n    kubernetesResources: false\n    kubernetesStorage: false\n    kubernetesSystem: false\n    kubeScheduler: false\n    kubeStateMetrics: false\n    network: false\n    node: true\n    nodeExporterAlerting: false\n    nodeExporterRecording: true\n    prometheus: false\n    prometheusOperator: false\n\n#nodeSelector:\n  #workload: monitor\nprometheus:\n  prometheusSpec:\n    podMonitorSelectorNilUsesHelmValues: false\n    ruleSelectorNilUsesHelmValues: false\n    serviceMonitorSelectorNilUsesHelmValues: false\n    probeSelectorNilUsesHelmValues: false\n  #nodeSelector:\n    #workload: monitor\ngrafana:\n  enabled: true\n  # -- the grafana admin password\n  adminPassword: prom-operator\n  defaultDashboardsEnabled: false\n  sidecar:\n      dashboards:\n        enabled: true\n  #nodeSelector:\n    #workload: monitor\nalertmanager:\n  enabled: true\n  #alertManagerSpec:\n    #nodeSelector:\n      #workload: monitor\n"],"verify":false,"version":"67.5.0","wait":true,"wait_for_jobs":false},"sensitive_attributes":[[{"type":"get_attr","value":"repository_password"}]],"private":"eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==","dependencies":["module.helm_releases.data.http.kube_stack_config","module.helm_releases.helm_release.cnpg","module.k8s_manifests.kubernetes_manifest.postgres_cluster","module.k8s_manifests.kubernetes_namespace.namespace","module.k8s_manifests.kubernetes_secret.postgres_credentials"]}]},{"module":"module.k8s_manifests","mode":"managed","type":"kubernetes_manifest","name":"postgres_cluster","provider":"provider[\"registry.opentofu.org/hashicorp/kubernetes\"]","instances":[{"schema_version":1,"attributes":{"computed_fields":null,"field_manager":[],"manifest":{"value":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","metadata":{"name":"postgres-cluster","namespace":"home"},"spec":{"bootstrap":{"initdb":{"database":"app","owner":"cluster","secret":{"name":"postgres-credentials"}}},"instances":3,"managed":{"roles":[{"ensure":"present","login":true,"name":"cluster","passwordSecret":{"name":"postgres-credentials"},"superuser":true}]},"monitoring":{"enablePodMonitor":true},"storage":{"size":"1Gi"}}},"type":["object",{"apiVersion":"string","kind":"string","metadata":["object",{"name":"string","namespace":"string"}],"spec":["object",{"bootstrap":["object",{"initdb":["object",{"database":"string","owner":"string","secret":["object",{"name":"string"}]}]}],"instances":"number","managed":["object",{"roles":["tuple",[["object",{"ensure":"string","login":"bool","name":"string","passwordSecret":["object",{"name":"string"}],"superuser":"bool"}]]]}],"monitoring":["object",{"enablePodMonitor":"bool"}],"storage":["object",{"size":"string"}]}]}]},"object":{"value":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","metadata":{"annotations":null,"creationTimestamp":null,"deletionGracePeriodSeconds":null,"deletionTimestamp":null,"finalizers":null,"generateName":null,"generation":null,"labels":null,"managedFields":null,"name":"postgres-cluster","namespace":"home","ownerReferences":null,"resourceVersion":null,"selfLink":null,"uid":null},"spec":{"affinity":{"additionalPodAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":null,"requiredDuringSchedulingIgnoredDuringExecution":null},"additionalPodAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":null,"requiredDuringSchedulingIgnoredDuringExecution":null},"enablePodAntiAffinity":null,"nodeAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":null,"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":null}},"nodeSelector":null,"podAntiAffinityType":"preferred","tolerations":null,"topologyKey":null},"backup":{"barmanObjectStore":{"azureCredentials":{"connectionString":{"key":null,"name":null},"inheritFromAzureAD":null,"storageAccount":{"key":null,"name":null},"storageKey":{"key":null,"name":null},"storageSasToken":{"key":null,"name":null}},"data":{"additionalCommandArgs":null,"compression":null,"encryption":null,"immediateCheckpoint":null,"jobs":null},"destinationPath":null,"endpointCA":{"key":null,"name":null},"endpointURL":null,"googleCredentials":{"applicationCredentials":{"key":null,"name":null},"gkeEnvironment":null},"historyTags":null,"s3Credentials":{"accessKeyId":{"key":null,"name":null},"inheritFromIAMRole":null,"region":{"key":null,"name":null},"secretAccessKey":{"key":null,"name":null},"sessionToken":{"key":null,"name":null}},"serverName":null,"tags":null,"wal":{"archiveAdditionalCommandArgs":null,"compression":null,"encryption":null,"maxParallel":null,"restoreAdditionalCommandArgs":null}},"retentionPolicy":null,"target":null,"volumeSnapshot":{"annotations":null,"className":null,"labels":null,"online":null,"onlineConfiguration":{"immediateCheckpoint":null,"waitForArchive":null},"snapshotOwnerReference":null,"tablespaceClassName":null,"walClassName":null}},"bootstrap":{"initdb":{"builtinLocale":null,"dataChecksums":null,"database":"app","encoding":"UTF8","icuLocale":null,"icuRules":null,"import":{"databases":null,"pgDumpExtraOptions":null,"pgRestoreExtraOptions":null,"postImportApplicationSQL":null,"roles":null,"schemaOnly":null,"source":{"externalCluster":null},"type":null},"locale":null,"localeCType":"C","localeCollate":"C","localeProvider":null,"options":null,"owner":"cluster","postInitApplicationSQL":null,"postInitApplicationSQLRefs":{"configMapRefs":null,"secretRefs":null},"postInitSQL":null,"postInitSQLRefs":{"configMapRefs":null,"secretRefs":null},"postInitTemplateSQL":null,"postInitTemplateSQLRefs":{"configMapRefs":null,"secretRefs":null},"secret":{"name":"postgres-credentials"},"walSegmentSize":null},"pg_basebackup":{"database":null,"owner":null,"secret":{"name":null},"source":null},"recovery":{"backup":{"endpointCA":{"key":null,"name":null},"name":null},"database":null,"owner":null,"recoveryTarget":{"backupID":null,"exclusive":null,"targetImmediate":null,"targetLSN":null,"targetName":null,"targetTLI":null,"targetTime":null,"targetXID":null},"secret":{"name":null},"source":null,"volumeSnapshots":{"storage":{"apiGroup":null,"kind":null,"name":null},"tablespaceStorage":null,"walStorage":{"apiGroup":null,"kind":null,"name":null}}}},"certificates":{"clientCASecret":null,"replicationTLSSecret":null,"serverAltDNSNames":null,"serverCASecret":null,"serverTLSSecret":null},"description":null,"enablePDB":true,"enableSuperuserAccess":false,"env":null,"envFrom":null,"ephemeralVolumeSource":{"volumeClaimTemplate":{"metadata":null,"spec":{"accessModes":null,"dataSource":{"apiGroup":null,"kind":null,"name":null},"dataSourceRef":{"apiGroup":null,"kind":null,"name":null,"namespace":null},"resources":{"limits":null,"requests":null},"selector":{"matchExpressions":null,"matchLabels":null},"storageClassName":null,"volumeAttributesClassName":null,"volumeMode":null,"volumeName":null}}},"ephemeralVolumesSizeLimit":{"shm":null,"temporaryData":null},"externalClusters":null,"failoverDelay":0,"imageCatalogRef":{"apiGroup":null,"kind":null,"major":null,"name":null},"imageName":"ghcr.io/cloudnative-pg/postgresql:17.2","imagePullPolicy":null,"imagePullSecrets":null,"inheritedMetadata":{"annotations":null,"labels":null},"instances":3,"livenessProbeTimeout":null,"logLevel":"info","managed":{"roles":[{"bypassrls":null,"comment":null,"connectionLimit":-1,"createdb":null,"createrole":null,"disablePassword":null,"ensure":"present","inRoles":null,"inherit":true,"login":true,"name":"cluster","passwordSecret":{"name":"postgres-credentials"},"replication":null,"superuser":true,"validUntil":null}],"services":{"additional":null,"disabledDefaultServices":null}},"maxSyncReplicas":0,"minSyncReplicas":0,"monitoring":{"customQueriesConfigMap":[{"key":"queries","name":"cnpg-default-monitoring"}],"customQueriesSecret":null,"disableDefaultQueries":false,"enablePodMonitor":true,"podMonitorMetricRelabelings":null,"podMonitorRelabelings":null,"tls":{"enabled":null}},"nodeMaintenanceWindow":{"inProgress":null,"reusePVC":null},"plugins":null,"postgresGID":26,"postgresUID":26,"postgresql":{"enableAlterSystem":null,"ldap":{"bindAsAuth":{"prefix":null,"suffix":null},"bindSearchAuth":{"baseDN":null,"bindDN":null,"bindPassword":{"key":null,"name":null,"optional":null},"searchAttribute":null,"searchFilter":null},"port":null,"scheme":null,"server":null,"tls":null},"parameters":{"archive_mode":"on","archive_timeout":"5min","dynamic_shared_memory_type":"posix","full_page_writes":"on","log_destination":"csvlog","log_directory":"/controller/log","log_filename":"postgres","log_rotation_age":"0","log_rotation_size":"0","log_truncate_on_rotation":"false","logging_collector":"on","max_parallel_workers":"32","max_replication_slots":"32","max_worker_processes":"32","shared_memory_type":"mmap","shared_preload_libraries":"","ssl_max_protocol_version":"TLSv1.3","ssl_min_protocol_version":"TLSv1.3","wal_keep_size":"512MB","wal_level":"logical","wal_log_hints":"on","wal_receiver_timeout":"5s","wal_sender_timeout":"5s"},"pg_hba":null,"pg_ident":null,"promotionTimeout":null,"shared_preload_libraries":null,"syncReplicaElectionConstraint":{"enabled":false,"nodeLabelsAntiAffinity":null},"synchronous":{"dataDurability":null,"maxStandbyNamesFromCluster":null,"method":null,"number":null,"standbyNamesPost":null,"standbyNamesPre":null}},"primaryUpdateMethod":"restart","primaryUpdateStrategy":"unsupervised","priorityClassName":null,"probes":{"liveness":{"failureThreshold":null,"initialDelaySeconds":null,"periodSeconds":null,"successThreshold":null,"terminationGracePeriodSeconds":null,"timeoutSeconds":null},"readiness":{"failureThreshold":null,"initialDelaySeconds":null,"periodSeconds":null,"successThreshold":null,"terminationGracePeriodSeconds":null,"timeoutSeconds":null},"startup":{"failureThreshold":null,"initialDelaySeconds":null,"periodSeconds":null,"successThreshold":null,"terminationGracePeriodSeconds":null,"timeoutSeconds":null}},"projectedVolumeTemplate":{"defaultMode":null,"sources":null},"replica":{"enabled":null,"minApplyDelay":null,"primary":null,"promotionToken":null,"self":null,"source":null},"replicationSlots":{"highAvailability":{"enabled":true,"slotPrefix":"_cnpg_"},"synchronizeReplicas":{"enabled":true,"excludePatterns":null},"updateInterval":30},"resources":{"claims":null,"limits":null,"requests":null},"schedulerName":null,"seccompProfile":{"localhostProfile":null,"type":null},"serviceAccountTemplate":{"metadata":{"annotations":null,"labels":null,"name":null}},"smartShutdownTimeout":180,"startDelay":3600,"stopDelay":1800,"storage":{"pvcTemplate":{"accessModes":null,"dataSource":{"apiGroup":null,"kind":null,"name":null},"dataSourceRef":{"apiGroup":null,"kind":null,"name":null,"namespace":null},"resources":{"limits":null,"requests":null},"selector":{"matchExpressions":null,"matchLabels":null},"storageClassName":null,"volumeAttributesClassName":null,"volumeMode":null,"volumeName":null},"resizeInUseVolumes":true,"size":"1Gi","storageClass":null},"superuserSecret":{"name":null},"switchoverDelay":3600,"tablespaces":null,"topologySpreadConstraints":null,"walStorage":{"pvcTemplate":{"accessModes":null,"dataSource":{"apiGroup":null,"kind":null,"name":null},"dataSourceRef":{"apiGroup":null,"kind":null,"name":null,"namespace":null},"resources":{"limits":null,"requests":null},"selector":{"matchExpressions":null,"matchLabels":null},"storageClassName":null,"volumeAttributesClassName":null,"volumeMode":null,"volumeName":null},"resizeInUseVolumes":null,"size":null,"storageClass":null}}},"type":["object",{"apiVersion":"string","kind":"string","metadata":["object",{"annotations":["map","string"],"creationTimestamp":"string","deletionGracePeriodSeconds":"number","deletionTimestamp":"string","finalizers":["list","string"],"generateName":"string","generation":"number","labels":["map","string"],"managedFields":["tuple",[["object",{"apiVersion":"string","fieldsType":"string","fieldsV1":"dynamic","manager":"string","operation":"string","subresource":"string","time":"string"}]]],"name":"string","namespace":"string","ownerReferences":["list",["object",{"apiVersion":"string","blockOwnerDeletion":"bool","controller":"bool","kind":"string","name":"string","uid":"string"}]],"resourceVersion":"string","selfLink":"string","uid":"string"}],"spec":["object",{"affinity":["object",{"additionalPodAffinity":["object",{"preferredDuringSchedulingIgnoredDuringExecution":["list",["object",{"podAffinityTerm":["object",{"labelSelector":["object",{"matchExpressions":["list",["object",{"key":"string","operator":"string","values":["list","string"]}]],"matchLabels":["map","string"]}],"matchLabelKeys":["list","string"],"mismatchLabelKeys":["list","string"],"namespaceSelector":["object",{"matchExpressions":["list",["object",{"key":"string","operator":"string","values":["list","string"]}]],"matchLabels":["map","string"]}],"namespaces":["list","string"],"topologyKey":"string"}],"weight":"number"}]],"requiredDuringSchedulingIgnoredDuringExecution":["list",["object",{"labelSelector":["object",{"matchExpressions":["list",["object",{"key":"string","operator":"string","values":["list","string"]}]],"matchLabels":["map","string"]}],"matchLabelKeys":["list","string"],"mismatchLabelKeys":["list","string"],"namespaceSelector":["object",{"matchExpressions":["list",["object",{"key":"string","operator":"string","values":["list","string"]}]],"matchLabels":["map","string"]}],"namespaces":["list","string"],"topologyKey":"string"}]]}],"additionalPodAntiAffinity":["object",{"preferredDuringSchedulingIgnoredDuringExecution":["list",["object",{"podAffinityTerm":["object",{"labelSelector":["object",{"matchExpressions":["list",["object",{"key":"string","operator":"string","values":["list","string"]}]],"matchLabels":["map","string"]}],"matchLabelKeys":["list","string"],"mismatchLabelKeys":["list","string"],"namespaceSelector":["object",{"matchExpressions":["list",["object",{"key":"string","operator":"string","values":["list","string"]}]],"matchLabels":["map","string"]}],"namespaces":["list","string"],"topologyKey":"string"}],"weight":"number"}]],"requiredDuringSchedulingIgnoredDuringExecution":["list",["object",{"labelSelector":["object",{"matchExpressions":["list",["object",{"key":"string","operator":"string","values":["list","string"]}]],"matchLabels":["map","string"]}],"matchLabelKeys":["list","string"],"mismatchLabelKeys":["list","string"],"namespaceSelector":["object",{"matchExpressions":["list",["object",{"key":"string","operator":"string","values":["list","string"]}]],"matchLabels":["map","string"]}],"namespaces":["list","string"],"topologyKey":"string"}]]}],"enablePodAntiAffinity":"bool","nodeAffinity":["object",{"preferredDuringSchedulingIgnoredDuringExecution":["list",["object",{"preference":["object",{"matchExpressions":["list",["object",{"key":"string","operator":"string","values":["list","string"]}]],"matchFields":["list",["object",{"key":"string","operator":"string","values":["list","string"]}]]}],"weight":"number"}]],"requiredDuringSchedulingIgnoredDuringExecution":["object",{"nodeSelectorTerms":["list",["object",{"matchExpressions":["list",["object",{"key":"string","operator":"string","values":["list","string"]}]],"matchFields":["list",["object",{"key":"string","operator":"string","values":["list","string"]}]]}]]}]}],"nodeSelector":["map","string"],"podAntiAffinityType":"string","tolerations":["list",["object",{"effect":"string","key":"string","operator":"string","tolerationSeconds":"number","value":"string"}]],"topologyKey":"string"}],"backup":["object",{"barmanObjectStore":["object",{"azureCredentials":["object",{"connectionString":["object",{"key":"string","name":"string"}],"inheritFromAzureAD":"bool","storageAccount":["object",{"key":"string","name":"string"}],"storageKey":["object",{"key":"string","name":"string"}],"storageSasToken":["object",{"key":"string","name":"string"}]}],"data":["object",{"additionalCommandArgs":["list","string"],"compression":"string","encryption":"string","immediateCheckpoint":"bool","jobs":"number"}],"destinationPath":"string","endpointCA":["object",{"key":"string","name":"string"}],"endpointURL":"string","googleCredentials":["object",{"applicationCredentials":["object",{"key":"string","name":"string"}],"gkeEnvironment":"bool"}],"historyTags":["map","string"],"s3Credentials":["object",{"accessKeyId":["object",{"key":"string","name":"string"}],"inheritFromIAMRole":"bool","region":["object",{"key":"string","name":"string"}],"secretAccessKey":["object",{"key":"string","name":"string"}],"sessionToken":["object",{"key":"string","name":"string"}]}],"serverName":"string","tags":["map","string"],"wal":["object",{"archiveAdditionalCommandArgs":["list","string"],"compression":"string","encryption":"string","maxParallel":"number","restoreAdditionalCommandArgs":["list","string"]}]}],"retentionPolicy":"string","target":"string","volumeSnapshot":["object",{"annotations":["map","string"],"className":"string","labels":["map","string"],"online":"bool","onlineConfiguration":["object",{"immediateCheckpoint":"bool","waitForArchive":"bool"}],"snapshotOwnerReference":"string","tablespaceClassName":["map","string"],"walClassName":"string"}]}],"bootstrap":["object",{"initdb":["object",{"builtinLocale":"string","dataChecksums":"bool","database":"string","encoding":"string","icuLocale":"string","icuRules":"string","import":["object",{"databases":["list","string"],"pgDumpExtraOptions":["list","string"],"pgRestoreExtraOptions":["list","string"],"postImportApplicationSQL":["list","string"],"roles":["list","string"],"schemaOnly":"bool","source":["object",{"externalCluster":"string"}],"type":"string"}],"locale":"string","localeCType":"string","localeCollate":"string","localeProvider":"string","options":["list","string"],"owner":"string","postInitApplicationSQL":["list","string"],"postInitApplicationSQLRefs":["object",{"configMapRefs":["list",["object",{"key":"string","name":"string"}]],"secretRefs":["list",["object",{"key":"string","name":"string"}]]}],"postInitSQL":["list","string"],"postInitSQLRefs":["object",{"configMapRefs":["list",["object",{"key":"string","name":"string"}]],"secretRefs":["list",["object",{"key":"string","name":"string"}]]}],"postInitTemplateSQL":["list","string"],"postInitTemplateSQLRefs":["object",{"configMapRefs":["list",["object",{"key":"string","name":"string"}]],"secretRefs":["list",["object",{"key":"string","name":"string"}]]}],"secret":["object",{"name":"string"}],"walSegmentSize":"number"}],"pg_basebackup":["object",{"database":"string","owner":"string","secret":["object",{"name":"string"}],"source":"string"}],"recovery":["object",{"backup":["object",{"endpointCA":["object",{"key":"string","name":"string"}],"name":"string"}],"database":"string","owner":"string","recoveryTarget":["object",{"backupID":"string","exclusive":"bool","targetImmediate":"bool","targetLSN":"string","targetName":"string","targetTLI":"string","targetTime":"string","targetXID":"string"}],"secret":["object",{"name":"string"}],"source":"string","volumeSnapshots":["object",{"storage":["object",{"apiGroup":"string","kind":"string","name":"string"}],"tablespaceStorage":["map",["object",{"apiGroup":"string","kind":"string","name":"string"}]],"walStorage":["object",{"apiGroup":"string","kind":"string","name":"string"}]}]}]}],"certificates":["object",{"clientCASecret":"string","replicationTLSSecret":"string","serverAltDNSNames":["list","string"],"serverCASecret":"string","serverTLSSecret":"string"}],"description":"string","enablePDB":"bool","enableSuperuserAccess":"bool","env":["list",["object",{"name":"string","value":"string","valueFrom":["object",{"configMapKeyRef":["object",{"key":"string","name":"string","optional":"bool"}],"fieldRef":["object",{"apiVersion":"string","fieldPath":"string"}],"resourceFieldRef":["object",{"containerName":"string","divisor":"string","resource":"string"}],"secretKeyRef":["object",{"key":"string","name":"string","optional":"bool"}]}]}]],"envFrom":["list",["object",{"configMapRef":["object",{"name":"string","optional":"bool"}],"prefix":"string","secretRef":["object",{"name":"string","optional":"bool"}]}]],"ephemeralVolumeSource":["object",{"volumeClaimTemplate":["object",{"metadata":"dynamic","spec":["object",{"accessModes":["list","string"],"dataSource":["object",{"apiGroup":"string","kind":"string","name":"string"}],"dataSourceRef":["object",{"apiGroup":"string","kind":"string","name":"string","namespace":"string"}],"resources":["object",{"limits":["map","string"],"requests":["map","string"]}],"selector":["object",{"matchExpressions":["list",["object",{"key":"string","operator":"string","values":["list","string"]}]],"matchLabels":["map","string"]}],"storageClassName":"string","volumeAttributesClassName":"string","volumeMode":"string","volumeName":"string"}]}]}],"ephemeralVolumesSizeLimit":["object",{"shm":"string","temporaryData":"string"}],"externalClusters":["list",["object",{"barmanObjectStore":["object",{"azureCredentials":["object",{"connectionString":["object",{"key":"string","name":"string"}],"inheritFromAzureAD":"bool","storageAccount":["object",{"key":"string","name":"string"}],"storageKey":["object",{"key":"string","name":"string"}],"storageSasToken":["object",{"key":"string","name":"string"}]}],"data":["object",{"additionalCommandArgs":["list","string"],"compression":"string","encryption":"string","immediateCheckpoint":"bool","jobs":"number"}],"destinationPath":"string","endpointCA":["object",{"key":"string","name":"string"}],"endpointURL":"string","googleCredentials":["object",{"applicationCredentials":["object",{"key":"string","name":"string"}],"gkeEnvironment":"bool"}],"historyTags":["map","string"],"s3Credentials":["object",{"accessKeyId":["object",{"key":"string","name":"string"}],"inheritFromIAMRole":"bool","region":["object",{"key":"string","name":"string"}],"secretAccessKey":["object",{"key":"string","name":"string"}],"sessionToken":["object",{"key":"string","name":"string"}]}],"serverName":"string","tags":["map","string"],"wal":["object",{"archiveAdditionalCommandArgs":["list","string"],"compression":"string","encryption":"string","maxParallel":"number","restoreAdditionalCommandArgs":["list","string"]}]}],"connectionParameters":["map","string"],"name":"string","password":["object",{"key":"string","name":"string","optional":"bool"}],"plugin":["object",{"enabled":"bool","name":"string","parameters":["map","string"]}],"sslCert":["object",{"key":"string","name":"string","optional":"bool"}],"sslKey":["object",{"key":"string","name":"string","optional":"bool"}],"sslRootCert":["object",{"key":"string","name":"string","optional":"bool"}]}]],"failoverDelay":"number","imageCatalogRef":["object",{"apiGroup":"string","kind":"string","major":"number","name":"string"}],"imageName":"string","imagePullPolicy":"string","imagePullSecrets":["list",["object",{"name":"string"}]],"inheritedMetadata":["object",{"annotations":["map","string"],"labels":["map","string"]}],"instances":"number","livenessProbeTimeout":"number","logLevel":"string","managed":["object",{"roles":["list",["object",{"bypassrls":"bool","comment":"string","connectionLimit":"number","createdb":"bool","createrole":"bool","disablePassword":"bool","ensure":"string","inRoles":["list","string"],"inherit":"bool","login":"bool","name":"string","passwordSecret":["object",{"name":"string"}],"replication":"bool","superuser":"bool","validUntil":"string"}]],"services":["object",{"additional":["list",["object",{"selectorType":"string","serviceTemplate":["object",{"metadata":["object",{"annotations":["map","string"],"labels":["map","string"],"name":"string"}],"spec":["object",{"allocateLoadBalancerNodePorts":"bool","clusterIP":"string","clusterIPs":["list","string"],"externalIPs":["list","string"],"externalName":"string","externalTrafficPolicy":"string","healthCheckNodePort":"number","internalTrafficPolicy":"string","ipFamilies":["list","string"],"ipFamilyPolicy":"string","loadBalancerClass":"string","loadBalancerIP":"string","loadBalancerSourceRanges":["list","string"],"ports":["list",["object",{"appProtocol":"string","name":"string","nodePort":"number","port":"number","protocol":"string","targetPort":"string"}]],"publishNotReadyAddresses":"bool","selector":["map","string"],"sessionAffinity":"string","sessionAffinityConfig":["object",{"clientIP":["object",{"timeoutSeconds":"number"}]}],"trafficDistribution":"string","type":"string"}]}],"updateStrategy":"string"}]],"disabledDefaultServices":["list","string"]}]}],"maxSyncReplicas":"number","minSyncReplicas":"number","monitoring":["object",{"customQueriesConfigMap":["list",["object",{"key":"string","name":"string"}]],"customQueriesSecret":["list",["object",{"key":"string","name":"string"}]],"disableDefaultQueries":"bool","enablePodMonitor":"bool","podMonitorMetricRelabelings":["list",["object",{"action":"string","modulus":"number","regex":"string","replacement":"string","separator":"string","sourceLabels":["list","string"],"targetLabel":"string"}]],"podMonitorRelabelings":["list",["object",{"action":"string","modulus":"number","regex":"string","replacement":"string","separator":"string","sourceLabels":["list","string"],"targetLabel":"string"}]],"tls":["object",{"enabled":"bool"}]}],"nodeMaintenanceWindow":["object",{"inProgress":"bool","reusePVC":"bool"}],"plugins":["list",["object",{"enabled":"bool","name":"string","parameters":["map","string"]}]],"postgresGID":"number","postgresUID":"number","postgresql":["object",{"enableAlterSystem":"bool","ldap":["object",{"bindAsAuth":["object",{"prefix":"string","suffix":"string"}],"bindSearchAuth":["object",{"baseDN":"string","bindDN":"string","bindPassword":["object",{"key":"string","name":"string","optional":"bool"}],"searchAttribute":"string","searchFilter":"string"}],"port":"number","scheme":"string","server":"string","tls":"bool"}],"parameters":["map","string"],"pg_hba":["list","string"],"pg_ident":["list","string"],"promotionTimeout":"number","shared_preload_libraries":["list","string"],"syncReplicaElectionConstraint":["object",{"enabled":"bool","nodeLabelsAntiAffinity":["list","string"]}],"synchronous":["object",{"dataDurability":"string","maxStandbyNamesFromCluster":"number","method":"string","number":"number","standbyNamesPost":["list","string"],"standbyNamesPre":["list","string"]}]}],"primaryUpdateMethod":"string","primaryUpdateStrategy":"string","priorityClassName":"string","probes":["object",{"liveness":["object",{"failureThreshold":"number","initialDelaySeconds":"number","periodSeconds":"number","successThreshold":"number","terminationGracePeriodSeconds":"number","timeoutSeconds":"number"}],"readiness":["object",{"failureThreshold":"number","initialDelaySeconds":"number","periodSeconds":"number","successThreshold":"number","terminationGracePeriodSeconds":"number","timeoutSeconds":"number"}],"startup":["object",{"failureThreshold":"number","initialDelaySeconds":"number","periodSeconds":"number","successThreshold":"number","terminationGracePeriodSeconds":"number","timeoutSeconds":"number"}]}],"projectedVolumeTemplate":["object",{"defaultMode":"number","sources":["list",["object",{"clusterTrustBundle":["object",{"labelSelector":["object",{"matchExpressions":["list",["object",{"key":"string","operator":"string","values":["list","string"]}]],"matchLabels":["map","string"]}],"name":"string","optional":"bool","path":"string","signerName":"string"}],"configMap":["object",{"items":["list",["object",{"key":"string","mode":"number","path":"string"}]],"name":"string","optional":"bool"}],"downwardAPI":["object",{"items":["list",["object",{"fieldRef":["object",{"apiVersion":"string","fieldPath":"string"}],"mode":"number","path":"string","resourceFieldRef":["object",{"containerName":"string","divisor":"string","resource":"string"}]}]]}],"secret":["object",{"items":["list",["object",{"key":"string","mode":"number","path":"string"}]],"name":"string","optional":"bool"}],"serviceAccountToken":["object",{"audience":"string","expirationSeconds":"number","path":"string"}]}]]}],"replica":["object",{"enabled":"bool","minApplyDelay":"string","primary":"string","promotionToken":"string","self":"string","source":"string"}],"replicationSlots":["object",{"highAvailability":["object",{"enabled":"bool","slotPrefix":"string"}],"synchronizeReplicas":["object",{"enabled":"bool","excludePatterns":["list","string"]}],"updateInterval":"number"}],"resources":["object",{"claims":["list",["object",{"name":"string","request":"string"}]],"limits":["map","string"],"requests":["map","string"]}],"schedulerName":"string","seccompProfile":["object",{"localhostProfile":"string","type":"string"}],"serviceAccountTemplate":["object",{"metadata":["object",{"annotations":["map","string"],"labels":["map","string"],"name":"string"}]}],"smartShutdownTimeout":"number","startDelay":"number","stopDelay":"number","storage":["object",{"pvcTemplate":["object",{"accessModes":["list","string"],"dataSource":["object",{"apiGroup":"string","kind":"string","name":"string"}],"dataSourceRef":["object",{"apiGroup":"string","kind":"string","name":"string","namespace":"string"}],"resources":["object",{"limits":["map","string"],"requests":["map","string"]}],"selector":["object",{"matchExpressions":["list",["object",{"key":"string","operator":"string","values":["list","string"]}]],"matchLabels":["map","string"]}],"storageClassName":"string","volumeAttributesClassName":"string","volumeMode":"string","volumeName":"string"}],"resizeInUseVolumes":"bool","size":"string","storageClass":"string"}],"superuserSecret":["object",{"name":"string"}],"switchoverDelay":"number","tablespaces":["list",["object",{"name":"string","owner":["object",{"name":"string"}],"storage":["object",{"pvcTemplate":["object",{"accessModes":["list","string"],"dataSource":["object",{"apiGroup":"string","kind":"string","name":"string"}],"dataSourceRef":["object",{"apiGroup":"string","kind":"string","name":"string","namespace":"string"}],"resources":["object",{"limits":["map","string"],"requests":["map","string"]}],"selector":["object",{"matchExpressions":["list",["object",{"key":"string","operator":"string","values":["list","string"]}]],"matchLabels":["map","string"]}],"storageClassName":"string","volumeAttributesClassName":"string","volumeMode":"string","volumeName":"string"}],"resizeInUseVolumes":"bool","size":"string","storageClass":"string"}],"temporary":"bool"}]],"topologySpreadConstraints":["list",["object",{"labelSelector":["object",{"matchExpressions":["list",["object",{"key":"string","operator":"string","values":["list","string"]}]],"matchLabels":["map","string"]}],"matchLabelKeys":["list","string"],"maxSkew":"number","minDomains":"number","nodeAffinityPolicy":"string","nodeTaintsPolicy":"string","topologyKey":"string","whenUnsatisfiable":"string"}]],"walStorage":["object",{"pvcTemplate":["object",{"accessModes":["list","string"],"dataSource":["object",{"apiGroup":"string","kind":"string","name":"string"}],"dataSourceRef":["object",{"apiGroup":"string","kind":"string","name":"string","namespace":"string"}],"resources":["object",{"limits":["map","string"],"requests":["map","string"]}],"selector":["object",{"matchExpressions":["list",["object",{"key":"string","operator":"string","values":["list","string"]}]],"matchLabels":["map","string"]}],"storageClassName":"string","volumeAttributesClassName":"string","volumeMode":"string","volumeName":"string"}],"resizeInUseVolumes":"bool","size":"string","storageClass":"string"}]}]}]},"timeouts":[],"wait":[],"wait_for":null},"sensitive_attributes":[[{"type":"get_attr","value":"manifest"},{"type":"get_attr","value":"spec"},{"type":"get_attr","value":"bootstrap"},{"type":"get_attr","value":"initdb"},{"type":"get_attr","value":"owner"}]],"dependencies":["module.k8s_manifests.kubernetes_namespace.namespace","module.k8s_manifests.kubernetes_secret.postgres_credentials"]}]},{"module":"module.k8s_manifests","mode":"managed","type":"kubernetes_namespace","name":"namespace","provider":"provider[\"registry.opentofu.org/hashicorp/kubernetes\"]","instances":[{"schema_version":0,"attributes":{"id":"home","metadata":[{"annotations":{},"generate_name":"","generation":0,"labels":{},"name":"home","resource_version":"15995481","uid":"d11af4a4-f8fc-42ca-a345-4d357227d5aa"}],"timeouts":null,"wait_for_default_service_account":false},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjozMDAwMDAwMDAwMDB9fQ=="}]},{"module":"module.k8s_manifests","mode":"managed","type":"kubernetes_secret","name":"postgres_credentials","provider":"provider[\"registry.opentofu.org/hashicorp/kubernetes\"]","instances":[{"schema_version":0,"attributes":{"binary_data":null,"data":{"password":"cluster","username":"cluster"},"id":"home/postgres-credentials","immutable":false,"metadata":[{"annotations":{},"generate_name":"","generation":0,"labels":{},"name":"postgres-credentials","namespace":"home","resource_version":"16001758","uid":"bc808716-b31c-426b-bfb3-5a2c5bede75d"}],"timeouts":null,"type":"Opaque","wait_for_service_account_token":true},"sensitive_attributes":[[{"type":"get_attr","value":"binary_data"}],[{"type":"get_attr","value":"data"}],[{"type":"get_attr","value":"data"},{"type":"index","value":{"value":"password","type":"string"}}],[{"type":"get_attr","value":"data"},{"type":"index","value":{"value":"username","type":"string"}}]],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMH19","dependencies":["module.k8s_manifests.kubernetes_namespace.namespace"]}]}],"check_results":null}
